(this["webpackJsonpstore-sanchez-diana"]=this["webpackJsonpstore-sanchez-diana"]||[]).push([[0],[,,,,,,,,function(e,t,a){e.exports=a.p+"static/media/coin.4669120c.svg"},,,,,,,,,,,,,,function(e,t,a){},function(e,t,a){e.exports=a.p+"static/media/aerolab-logo.71af6f4b.svg"},,,function(e,t,a){e.exports=a.p+"static/media/header-x2.a343e153.png"},function(e,t,a){e.exports=a.p+"static/media/buy-blue.2f11a957.svg"},function(e,t,a){e.exports=a.p+"static/media/buy-white.40bc2813.svg"},function(e,t,a){e.exports=a(50)},,,,,function(e,t,a){},,function(e,t,a){},function(e,t,a){},,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(14),l=a.n(c),o=a(2),i=(a(34),a(23)),s=a.n(i),u=a(8),m=a.n(u),d=a(10),p=a(17),f=a.n(p),E=a(7),b=a(24),v={load_user:{id:"profile",path:"/user/me",method:"GET"},products:{id:"products",path:"/products",method:"GET"},history:{id:"history",path:"/user/history",method:"GET"},redeem:{id:"redeem",path:"/redeem",method:"POST"},points:{id:"points",path:"/user/points",method:"POST"}},h="https://coding-challenge-api.aerolab.co",j="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI1ZjM1NDJmYTc1MTI2YzAwNmQwOGJiMDYiLCJpYXQiOjE1OTczMjYwNzR9.31SDbCf2qkqMAB0ZENf7K8Z87jmNyK11_ODaHVYTl2c";function g(e){return O.apply(this,arguments)}function O(){return(O=Object(b.a)(f.a.mark((function e(t){var a,n,r,c,l,o,i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.data,n=a.path,r=a.method,c=t.body,l={method:r,headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(j)}},"POST"===r&&(l=Object(E.a)(Object(E.a)({},l),{},{body:JSON.stringify(c)})),e.next=5,fetch(h+n,l);case 5:return o=e.sent,e.next=8,o.json();case 8:return i=e.sent,e.abrupt("return",i);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var N=["Lowest price","Higest price"],y=[{id:"Any category",options:[]},{id:"Any price",options:["0 - 500","501 - 1000","1001 - 1500","1501 - 2000","2001 - 2500"]}],x=[1e3,5e3,7500],C={name:"",points:0},S=r.a.createContext();function k(e){var t=e.children,a=Object(n.useState)(C),c=Object(o.a)(a,2),l=c[0],i=c[1];return r.a.createElement(S.Provider,{value:{user:l,setUser:i}},t)}a(36);var w=document.getElementById("modal-root"),P=function(e){var t=document.createElement("div");return Object(n.useEffect)((function(){return w.appendChild(t),function(){w.removeChild(t)}}),[t]),Object(c.createPortal)(r.a.createElement("div",{className:"modal-container"},r.a.createElement("div",{className:"modal"},r.a.createElement("button",{className:"modal-close",onClick:function(){return e.setShowModal(!e.showModal)}},"x"),e.children)),t)},M=(a(37),function(){var e=Object(n.useContext)(S),t=e.user,a=e.setUser,c=Object(n.useState)(x[0]),l=Object(o.a)(c,2),i=l[0],s=l[1],u=Object(n.useState)("Add points to your account now"),m=Object(o.a)(u,2),d=m[0],p=m[1],f=Object(n.useRef)(!0);return Object(n.useEffect)((function(){return function(){f.current=!1}}),[]),r.a.createElement("div",{className:"points-comp"},r.a.createElement("div",{className:"options"},x.map((function(e){return r.a.createElement("button",{key:e,className:i===e?"btn-active number":"btn number",onClick:function(){return s(e)}},e)}))),r.a.createElement("button",{className:"btn btn-add",onClick:function(){g({data:v.points,body:{amount:i}}).then((function(e){a(Object(E.a)(Object(E.a)({},t),{},{points:e["New Points"]})),f.current&&p(e.message)}))}},"Add points"),r.a.createElement("h3",null,d,"!"))}),I=function(){var e=Object(n.useContext)(S),t=e.user,a=t.name,c=t.points,l=e.setUser,i=Object(n.useState)(!1),u=Object(o.a)(i,2),p=u[0],f=u[1];return Object(n.useEffect)((function(){g({data:v.load_user}).then((function(e){return l(e)}))}),[l]),r.a.createElement("div",{className:"navigation-bar"},r.a.createElement("div",{className:"logo"},r.a.createElement("img",{src:s.a,alt:"Logo"})),r.a.createElement("ul",{className:"links"},r.a.createElement("li",null,r.a.createElement(d.b,{className:"link",to:"/store-react-app/profile"},"Profile")),r.a.createElement("li",null,r.a.createElement(d.b,{className:"link",to:"/store-react-app/"},"Products"))),r.a.createElement("button",{className:"profile-data",onClick:function(){return f(!p)}},r.a.createElement("p",{className:"username"},a),r.a.createElement("div",{className:"points"},r.a.createElement("p",null,c),r.a.createElement("img",{src:m.a,alt:"coin"}))),p&&r.a.createElement(P,{setShowModal:f,showModal:p},r.a.createElement("div",{className:"modal-confirmartion"},r.a.createElement(M,null))))},T=(a(43),a(26)),F=a.n(T),J=function(){return r.a.createElement("div",{className:"header"},r.a.createElement("img",{src:F.a,alt:"cover"}),r.a.createElement("h1",null,"Electronics"))},Y=a(1),B=a(11),z=(a(44),a(45),function(e){var t=e.setSortBy,a=e.jump,c=Object(n.useState)(""),l=Object(o.a)(c,2),i=l[0],s=l[1];return r.a.createElement("div",{className:"sortBar"},r.a.createElement("p",null,"Sort by: "),N.map((function(e){return r.a.createElement("button",{key:e,className:i===e?"btn-active":"btn",onClick:function(){return s(n=e),t(n),void a(1);var n}},e)})))}),A=(a(46),function(e){var t=e.handleFilterChange,a=e.id,c=e.options,l=e.jump,i=Object(n.useState)(""),s=Object(o.a)(i,2),u=s[0],m=s[1];c=[a].concat(Object(B.a)(c));return r.a.createElement("div",{className:"filter"},r.a.createElement("select",{onChange:function(e){return a=e.target.value,m(a),t(a),void l(1);var a},value:u},c.map((function(e){return r.a.createElement("option",{key:e,value:e},e)}))))}),D=(a(47),function(e){var t=e.products,a=e.setCategoryFilter,n=e.setPriceFilter,c=e.jump,l=Object(B.a)(t).map((function(e){return e.category})),o=Object(E.a)(Object(E.a)({},y[0]),{},{options:l.filter((function(e,t){return l.indexOf(e)===t}))});return r.a.createElement("div",{className:"filterBar"},r.a.createElement("p",null,"Filter by: "),r.a.createElement(A,Object.assign({},o,{handleFilterChange:a,jump:c})),r.a.createElement(A,Object.assign({},y[1],{handleFilterChange:n,jump:c})))});var R=function(e,t){var a=Object(n.useState)(1),r=Object(o.a)(a,2),c=r[0],l=r[1],i=Math.ceil(e.length/t);return{next:function(){l((function(e){return Math.min(e+1,i)}))},prev:function(){l((function(e){return Math.max(e-1,1)}))},jump:function(e){var t=Math.max(1,e);l((function(e){return Math.min(t,i)}))},currentData:function(){var a=(c-1)*t,n=a+t;return e.slice(a,n)},currentPage:c,maxPage:i}},U=(a(48),function(e){var t=e.currentPage,a=e.jump,n=e.prev,c=e.next,l=e.maxPage;return r.a.createElement("div",{className:"pagination"},r.a.createElement("p",null,16*(t-1)," of ",16*l," products"),r.a.createElement("button",{onClick:function(){return a(1)}},"<<"),r.a.createElement("button",{onClick:function(){return n()}},"<"),r.a.createElement(r.a.Fragment,null,t),r.a.createElement("button",{onClick:function(){return c()}},">"),r.a.createElement("button",{onClick:function(){return a(l)}},">>"))}),_=function(e){var t=e.info.id,a=e.render,c=Object(n.useState)([]),l=Object(o.a)(c,2),i=l[0],s=l[1],u=Object(n.useState)(y[1].id),m=Object(o.a)(u,2),d=m[0],p=m[1],f=Object(n.useState)(y[0].id),b=Object(o.a)(f,2),h=b[0],j=b[1],O=Object(n.useState)(""),x=Object(o.a)(O,2),C=x[0],S=x[1];Object(n.useEffect)((function(){g({data:v[t]}).then((function(e){return s(e)}))}),[t]);var k=Object(B.a)(i).sort((function(e,t){return C===N[0]?e.cost-t.cost:t.cost-e.cost})).filter((function(e){return(h===y[0].id||e.category===h)&&(d===y[1].id||e.cost>parseInt(d.split("-")[0])&&e.cost<parseInt(d.split("-")[1]))})),w=R(k,16),P=w.next,M=w.prev,I=w.jump,T=w.currentData,F=w.currentPage,J=w.maxPage;return k=T(),r.a.createElement("div",{className:"products"},r.a.createElement("div",{className:"menu"},r.a.createElement(z,{setSortBy:S,jump:I}),r.a.createElement(D,{products:i,setCategoryFilter:j,setPriceFilter:p,jump:I}),r.a.createElement(U,{currentPage:F,jump:I,prev:M,next:P,maxPage:J})),r.a.createElement("div",{className:"grid"},k.map((function(e){return r.a.createElement(n.Fragment,{key:e.id},a(Object(E.a)({},e)))}))),r.a.createElement("div",{className:"menu",style:{justifyContent:"right",paddingRight:"10%"}},r.a.createElement(U,{currentPage:F,jump:I,prev:M,next:P,maxPage:J})))},G=(a(49),function(e){var t=e.info,a=e.render,c=Object(n.useContext)(S).user,l=c.name,o=c.points,i=c.createDate,s=void 0===i?"":i;return r.a.createElement("div",{className:"profile"},r.a.createElement("div",{className:"user"},r.a.createElement("div",{className:"user-info"},r.a.createElement("h1",null,l),r.a.createElement("h2",null,"Points available: ",o),r.a.createElement("p",null,"Count created on: ",s.substr(0,10))),r.a.createElement(M,null)),r.a.createElement("h1",{className:"history-title"},"BUY HISTORY"),r.a.createElement(_,{info:t,render:a}))}),H=(a(22),a(27)),L=a.n(H),Q=a(28),Z=a.n(Q),q=function(e){var t=e._id,a=e.name,c=e.cost,l=e.category,i=e.img.url,s=Object(n.useContext)(S),u=s.user,d=s.setUser,p=Object(n.useState)(!1),f=Object(o.a)(p,2),E=f[0],b=f[1],h=Object(n.useState)(""),j=Object(o.a)(h,2),O=j[0],N=j[1],y=u.points-c;return r.a.createElement("div",{className:"card"},y>0?r.a.createElement("img",{className:"icon",src:L.a,alt:"icon"}):r.a.createElement("div",{className:"icon"},r.a.createElement("div",{className:"you-need"},r.a.createElement("p",null," You need ",-y),r.a.createElement("img",{src:m.a,alt:"coin"}))),r.a.createElement("img",{className:"product",src:i,alt:"product"}),r.a.createElement("div",{className:"info"},r.a.createElement("div",{className:"line"}),r.a.createElement("p",null,l),r.a.createElement("h3",null,a),r.a.createElement("div",{className:"card-points"},r.a.createElement("img",{src:m.a,alt:"coin"}),r.a.createElement("p",null,c))),y>0&&r.a.createElement("div",{className:"card-hover"},r.a.createElement("img",{className:"icon",src:Z.a,alt:"icon"}),r.a.createElement("div",{className:"buy-info"},r.a.createElement("div",{className:"points-card"},r.a.createElement("p",null,c),r.a.createElement("img",{src:m.a,alt:"coin"})),r.a.createElement("button",{className:"btn btn-add",onClick:function(){g({data:v.redeem,body:{productId:t}}).then((function(e){b(!0),"You've redeem the product successfully"===e.message?N(e.message):N("Oh no, something went wrong!"),g({data:v.load_user}).then((function(e){return d(e)}))})).catch(N("Oh no, something went wrong!"))}},"Redeem now"))),E&&r.a.createElement(P,{setShowModal:b,showModal:E},r.a.createElement("div",{className:"modal-confirmartion"},r.a.createElement("p",null,O))))},K=function(e){e._id;var t=e.name,a=e.cost,n=e.category,c=e.img.url;return r.a.createElement("div",{className:"card history-card"},r.a.createElement("img",{src:c,alt:"product"}),r.a.createElement("div",{className:"info"},r.a.createElement("p",null,n),r.a.createElement("h3",null,t),r.a.createElement("div",{className:"card-points"},r.a.createElement("img",{src:m.a,alt:"coin"}),r.a.createElement("p",null,a))))},V=function(){return r.a.createElement(Y.c,null,r.a.createElement(Y.a,{exact:!0,path:"/store-react-app/",render:function(){return r.a.createElement(_,{info:v.products,render:function(e){return r.a.createElement(q,e)}})}}),r.a.createElement(Y.a,{exact:!0,path:"/store-react-app/profile",render:function(){return r.a.createElement(G,{info:v.history,render:function(e){return r.a.createElement(K,e)}})}}))};var X=function(){return r.a.createElement(k,null,r.a.createElement(I,null),r.a.createElement(J,null),r.a.createElement(V,null))};l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(d.a,null,r.a.createElement(X,null))),document.getElementById("root"))}],[[29,1,2]]]);
//# sourceMappingURL=main.a5c6979a.chunk.js.map